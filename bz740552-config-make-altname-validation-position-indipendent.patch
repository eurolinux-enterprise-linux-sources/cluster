commit 0294c7ebd6c9fc497d97ae351682edcb92e2d865
Author: Fabio M. Di Nitto <fdinitto@redhat.com>
Date:   Mon Nov 28 10:47:56 2011 +0100

    config: make altname validation position indipendent
    
    Resolves: rhbz#740552
    
    Signed-off-by: Lon Hohberger <lhh@redhat.com>
    Signed-off-by: Fabio M. Di Nitto <fdinitto@redhat.com>

diff --git a/config/tools/xml/cluster.rng.in.head b/config/tools/xml/cluster.rng.in.head
index e6e4633..11d5052 100644
--- a/config/tools/xml/cluster.rng.in.head
+++ b/config/tools/xml/cluster.rng.in.head
@@ -785,32 +785,11 @@ To validate your cluster.conf against this schema, run:
         dlm_controld(8)"/>
    </optional>
 
-   <optional>
-    <element name="altname" rha:description="Defines a second network
-        interface to use for corosync redundant ring mode. cman(5)">
-
-     <attribute name="name" rha:description="A second hostname or IP
-        address of the node. cman(5)"/>
-
-     <optional>
-      <attribute name="port" rha:description="The network port to use
-          on the second interface. cman(5)"/>
-     </optional>
-
-     <optional>
-      <attribute name="mcast" rha:description="The multicast address
-          to use on the second interface. cman(5)"/>
-     </optional>
-
-     <optional>
-      <attribute name="ttl" rha:description="The multicast TTL 
-          to use on the second interface. cman(5)"/>
-     </optional>
-    </element>
-   </optional>
-
    <interleave>
     <optional>
+     <ref name="ALTNAME"/>
+    </optional>
+    <optional>
      <ref name="FENCE"/>
     </optional>
     <optional>
@@ -1034,6 +1013,34 @@ To validate your cluster.conf against this schema, run:
 </element> <!-- cluster end -->
 </start>
 
+<!-- begin node altname definitions -->
+
+ <define name="ALTNAME">
+    <element name="altname" rha:description="Defines a second network
+        interface to use for corosync redundant ring mode. cman(5)">
+
+     <attribute name="name" rha:description="A second hostname or IP
+        address of the node. cman(5)"/>
+
+     <optional>
+      <attribute name="port" rha:description="The network port to use
+          on the second interface. cman(5)"/>
+     </optional>
+
+     <optional>
+      <attribute name="mcast" rha:description="The multicast address
+          to use on the second interface. cman(5)"/>
+     </optional>
+
+     <optional>
+      <attribute name="ttl" rha:description="The multicast TTL 
+          to use on the second interface. cman(5)"/>
+     </optional>
+    </element>
+ </define>
+
+<!-- end node altname definitions -->
+
 <!-- begin node fence definitions -->
 
  <define name="FENCE">
